# 待辦事項清單

## 圖片管理

### 設置後端 API 處理 R2 圖片刪除

當前問題：從前端直接刪除 R2 圖片會遇到 CORS 和安全憑證問題，導致 "Failed to fetch" 錯誤。

解決方案選項：

1. **設置 Firebase Cloud Functions**：
   - 創建一個 Cloud Function 來處理圖片刪除請求
   - 在刪除文章時調用此函數
   - 優點：與現有 Firebase 基礎設施集成

2. **設置 Cloudflare Workers**：
   - 創建一個 Worker 來處理圖片刪除請求
   - 優點：與 R2 存儲在同一平台，可能有更好的性能

3. **設置獨立的後端 API**：
   - 使用 Express.js 或其他框架創建一個簡單的 API
   - 部署到 Vercel、Netlify 或其他平台
   - 優點：更靈活的控制和擴展性

4. **定期清理未使用的圖片**：
   - 實現一個定期運行的任務，比較 Firestore 中的圖片引用和 R2 存儲中的圖片
   - 刪除未被引用的圖片
   - 優點：不需要在刪除文章時立即刪除圖片

## 當前臨時解決方案

目前，當刪除文章時，我們：
1. 成功刪除原文章
2. 成功刪除所有相關的轉發文章
3. 將需要刪除的圖片 URL 記錄在控制台中，但不嘗試從前端刪除它們

這確保了用戶體驗不受影響，但需要手動清理未使用的圖片。
